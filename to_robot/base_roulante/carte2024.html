<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Carte 2024 - Doc ENAC Robotique</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../accueil.html"><strong aria-hidden="true">1.</strong> Accueil</a></li><li class="chapter-item expanded "><a href="../../organisation/orga.html"><strong aria-hidden="true">2.</strong> Organisation du club</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../organisation/activites.html"><strong aria-hidden="true">2.1.</strong> Activitées</a></li><li class="chapter-item expanded "><a href="../../organisation/membre.html"><strong aria-hidden="true">2.2.</strong> Être membre du club</a></li><li class="chapter-item expanded "><a href="../../organisation/logistique.html"><strong aria-hidden="true">2.3.</strong> Logistique</a></li><li class="chapter-item expanded "><a href="../../organisation/contacts.html"><strong aria-hidden="true">2.4.</strong> Contacts</a></li></ol></li><li class="chapter-item expanded "><a href="../../introductions/introRobot.html"><strong aria-hidden="true">3.</strong> Intro Création robot</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../introductions/lexique.html"><strong aria-hidden="true">3.1.</strong> Lexique</a></li><li class="chapter-item expanded "><a href="../../datasheets/datasheets.html"><strong aria-hidden="true">3.2.</strong> Datasheets</a></li></ol></li><li class="chapter-item expanded "><a href="../../bases/index.html"><strong aria-hidden="true">4.</strong> Les bases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../bases/info/index.html"><strong aria-hidden="true">4.1.</strong> Programmation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../bases/info/vscode.html"><strong aria-hidden="true">4.1.1.</strong> VS Code & Platformio</a></li><li class="chapter-item expanded "><a href="../../bases/info/introPython.html"><strong aria-hidden="true">4.1.2.</strong> Python</a></li><li class="chapter-item expanded "><a href="../../bases/info/introC.html"><strong aria-hidden="true">4.1.3.</strong> Progammation pour l'embarqué </a></li></ol></li><li class="chapter-item expanded "><a href="../../bases/meca/introMeca.html"><strong aria-hidden="true">4.2.</strong> Mécanique</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../bases/meca/onshape.html"><strong aria-hidden="true">4.2.1.</strong> Onshape</a></li><li class="chapter-item expanded "><a href="../../bases/meca/imprimante.html"><strong aria-hidden="true">4.2.2.</strong> Impression3D</a></li><li class="chapter-item expanded "><a href="../../bases/meca/laser.html"><strong aria-hidden="true">4.2.3.</strong> Découpe Laser</a></li></ol></li><li class="chapter-item expanded "><a href="../../bases/elec/index.html"><strong aria-hidden="true">4.3.</strong> Électronique</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../bases/elec/led.html"><strong aria-hidden="true">4.3.1.</strong> Allumer une Led</a></li><li class="chapter-item expanded "><a href="../../bases/elec/sos_elec.html"><strong aria-hidden="true">4.3.2.</strong> Identifier un problème dans un circuit</a></li><li class="chapter-item expanded "><a href="../../bases/elec/microcontrolleur.html"><strong aria-hidden="true">4.3.3.</strong> Microcontrolleurs</a></li><li class="chapter-item expanded "><a href="../../bases/elec/kicad.html"><strong aria-hidden="true">4.3.4.</strong> Kicad</a></li></ol></li><li class="chapter-item expanded "><a href="../../bases/linux/index.html"><strong aria-hidden="true">4.4.</strong> Linux</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../bases/linux/dual_boot.html"><strong aria-hidden="true">4.4.1.</strong> Dual Boot</a></li><li class="chapter-item expanded "><a href="../../bases/linux/git.html"><strong aria-hidden="true">4.4.2.</strong> Git</a></li><li class="chapter-item expanded "><a href="../../bases/linux/ssh.html"><strong aria-hidden="true">4.4.3.</strong> SSH</a></li><li class="chapter-item expanded "><a href="../../bases/linux/bash_usefull.html"><strong aria-hidden="true">4.4.4.</strong> Bash tips</a></li></ol></li><li class="chapter-item expanded "><a href="../../bases/tutoboard/tutoboard.html"><strong aria-hidden="true">4.5.</strong> La tutoboard Enac</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../bases/tutoboard/bases.html"><strong aria-hidden="true">4.5.1.</strong> Les bases</a></li><li class="chapter-item expanded "><a href="../../bases/tutoboard/comm.html"><strong aria-hidden="true">4.5.2.</strong> La communications</a></li><li class="chapter-item expanded "><a href="../../bases/tutoboard/attiny.html"><strong aria-hidden="true">4.5.3.</strong> L'Attiny</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../to_robot/to_robot.html"><strong aria-hidden="true">5.</strong> Vers le robot (WIP)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../to_robot/base_roulante/holonome.html"><strong aria-hidden="true">5.1.</strong> Base roulante Holonome</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.1.</strong> Conception Méca</div></li><li class="chapter-item expanded "><a href="../../to_robot/base_roulante/carte_elec.html"><strong aria-hidden="true">5.1.2.</strong> Conception éléc</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../to_robot/base_roulante/carte2024.html" class="active"><strong aria-hidden="true">5.1.2.1.</strong> Carte 2024</a></li><li class="chapter-item expanded "><a href="../../to_robot/base_roulante/notions_elec.html"><strong aria-hidden="true">5.1.2.2.</strong> Notions pour la conception éléc</a></li></ol></li><li class="chapter-item expanded "><a href="../../to_robot/commande/asserv.html"><strong aria-hidden="true">5.1.3.</strong> Commande</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Les actionneurs</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.1.</strong> Prototypage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.2.</strong> Intégration</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> Communications</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.1.</strong> Comm Haut/Bas niveau</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.2.</strong> eCal et protobuff</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> Le haut niveau</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../to_robot/haut_niveau/raspberry_pi.html"><strong aria-hidden="true">5.4.1.</strong> Monter une raspi</a></li><li class="chapter-item expanded "><a href="../../to_robot/haut_niveau/interface.html"><strong aria-hidden="true">5.4.2.</strong> Interfaçage</a></li><li class="chapter-item expanded "><a href="../../to_robot/haut_niveau/decision.html"><strong aria-hidden="true">5.4.3.</strong> Inteligence du robot</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> FAQ/REX : Retour D'expérience</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../rex/shoot.html"><strong aria-hidden="true">6.1.</strong> Système de tir</a></li></ol></li><li class="chapter-item expanded "><a href="../../petits_tutos/index.html"><strong aria-hidden="true">7.</strong> Petits tutos</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../petits_tutos/peripherique_occupe.html"><strong aria-hidden="true">7.1.</strong> Périphérique occupé au branchement d'un µC</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Doc ENAC Robotique</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="carte-base-2024"><a class="header" href="#carte-base-2024">Carte Base 2024</a></h1>
<p>Cette section vise à monter et expliquer la conception de la carte pour simplement la comprendre. Elle sert aussi de support pour guider quelqu'un dans la conception d'une carte similaire.</p>
<p>Petit visuel sur la carte:</p>
<img src="../../images/carte_base_2024_annotation.png" alt="image" width="350" height="auto">
<h2 id="utilisation"><a class="header" href="#utilisation">Utilisation</a></h2>
<h2 id="conception"><a class="header" href="#conception">Conception</a></h2>
<p>Bien évidemment il faut d'abord commencer par la schématique fonctionelle de nos composants. En les choisissant soigneusement et en vérifiants toutes leurs dépendances.</p>
<p>Ensuite on procède à un placement préliminaire des composants en essayant d'imaginer les routage qui seront nécéssaire. On essaie de faire le moins de croisement possibles et si nécéssaire on modifie l'affectation des pins de la schématique.</p>
<p>Enfin on s'occupe du routage. On fait attention à l'utilisation des grilles et on travaille en système métrique.</p>
<h4 id="microcontrolleur-µc"><a class="header" href="#microcontrolleur-µc">Microcontrolleur (µC):</a></h4>
<p>Sur les cartes de développement on précise génréalement dans les datasheets sur quel pins se trouvent les fonctions et ou elles se situent sur la carte. Ici, c'est à nous de les placer. En partant du microcontolleur et en les routant ailleur sur la carte à notre bon vouloir.</p>
<p>Un outils confortable pour cela est cube MX. Il permet de visualiser ( et configurer mais on ne le fera pas ici) la puce ou même les cartes de dévelopement. Ci dessous la configuration choisie des broches du µC. Elle à été faite itérativement. Tout d'abord chercher les broches qui ont les fonctions qui nous intéressent et essayer de les mêtre du coté vers ou elles seront routées. Au moment de les placer physiquement sur la carte on peut itérativement chercher la meilleur configuration.</p>
<img src="../../images/cube_mx_stm.png" alt="image" width="400" height="auto">
<p>Comme décrit dans la section 5.1.6 de la datasheet du g484 il faut penser à ajouter aux alimentation des <a href="../../elec/notions.html">capacités de découplage</a> pour permettre son bon fonctionnement.</p>
<img src="../../images/g484-5.1.6.png" alt="image" width="350" height="auto">
<h4 id="mesure-du-niveau-de-batterie"><a class="header" href="#mesure-du-niveau-de-batterie">Mesure du niveau de batterie</a></h4>
<p>Il suffit d'utiliser un pont diviseur de tension ou le pont est connecté directement à une broche du micro controlleur. En pratique la batterie étant très durable on ne s'en est pas beaucoup servi. ( Mais on s'en est beaucoup servi sur les PAMI !)</p>
<img src="../../images/meas_bat.png" alt="image" width="200" height="auto">
<h4 id="protection-de-polarité-inversé"><a class="header" href="#protection-de-polarité-inversé">Protection de polarité inversé</a></h4>
<img src="../../images/protection_zener.png" alt="image" width="200" height="auto">
<ul>
<li>
<p>Gestion de puissance</p>
</li>
<li>
<p>Driver</p>
</li>
<li>
<p>Connectiques</p>
</li>
<li>
<p>Imu</p>
</li>
</ul>
<h2 id="problèmes-rencontrés"><a class="header" href="#problèmes-rencontrés">Problèmes rencontrés</a></h2>
<p>Pour une raison encore non comprises, il arrive que la carte subisses de chutes de tension. Par conséquent le microcontrolleur redémarre et cela fait complètement planter le robot en condition de match. La solution de contournement trouvé en attendant est de brancher l'USB pour avoir un maintien de la tension du microcontrolleur afin qu'il supporte ces chutes de tension.</p>
<h2 id="composants-"><a class="header" href="#composants-">Composants :</a></h2>
<p>La plupart sont disponibles sur <a href="https://fr.rs-online.com/web/">RS</a></p>
<ul>
<li><a href="../../datasheets/stm32g484re-1.pdf">Microcontrolleur STM32G484RET</a></li>
<li><a href="../../datasheets/Infineon-IFX9201SG-DS-v01_01-EN.pdf">Drivers Moteur IFX9201SG</a></li>
<li><a href="../../datasheets/lsm6dsl.pdf">IMU LSM6DSL</a></li>
<li>Régulateur 5V- 3.3V : LM3940IMP-3.3</li>
<li><a href="../../datasheets/R-78E-1.0.pdf">Régulateur R-78E5.0-1.0</a></li>
<li><a href="../../datasheets/Infineon-IRF7404-DataSheet-v01_01-EN.pdf">Transistor MOSFET IRF7404</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../to_robot/base_roulante/carte_elec.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../to_robot/base_roulante/notions_elec.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../to_robot/base_roulante/carte_elec.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../to_robot/base_roulante/notions_elec.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
